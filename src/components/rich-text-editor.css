/* Rich Text Editor Base Styles */
.rich-text-editor {
  @apply w-full rounded-md border border-input bg-transparent text-sm shadow-sm transition-colors;
  @apply focus-within:outline-none focus-within:ring-1 focus-within:ring-ring;
}

.rich-text-editor .ProseMirror {
  @apply min-h-[80px] w-full px-3 py-2;
  @apply focus:outline-none;
}

.rich-text-editor.full-featured .ProseMirror {
  @apply min-h-[300px];
}

.rich-text-editor .ProseMirror p.is-editor-empty:first-child::before {
  @apply text-muted-foreground;
  content: attr(data-placeholder);
  float: left;
  height: 0;
  pointer-events: none;
}

/* Headings */
.rich-text-editor .ProseMirror h1 {
  @apply text-3xl font-bold mb-4 mt-6;
}

.rich-text-editor .ProseMirror h2 {
  @apply text-2xl font-bold mb-3 mt-5;
}

.rich-text-editor .ProseMirror h3 {
  @apply text-xl font-bold mb-2 mt-4;
}

.rich-text-editor .ProseMirror h4 {
  @apply text-lg font-semibold mb-2 mt-3;
}

.rich-text-editor .ProseMirror h5 {
  @apply text-base font-semibold mb-1 mt-2;
}

.rich-text-editor .ProseMirror h6 {
  @apply text-sm font-semibold mb-1 mt-2;
}

/* ============================================
   LISTS - Bullet, Numbered, and Task Lists
   
   Design System:
   - Consistent 1.5rem (24px) left padding for all lists
   - Consistent 1.5rem (24px) indentation per nesting level
   - Unified vertical rhythm: 0.375rem (6px) between items
   - Markers vertically centered with first line of text
   ============================================ */

/* Shared list spacing variables */
.rich-text-editor .ProseMirror ul:not(.task-list),
.rich-text-editor .ProseMirror ol,
.rich-text-editor .ProseMirror ul.task-list {
  --list-indent: 1.5rem;
  --list-marker-offset: 1.5rem;
  --list-item-gap: 0.375rem;
}

/* ---- UNORDERED LISTS (Bullets) ---- */
.rich-text-editor .ProseMirror ul:not(.task-list) {
  padding-left: var(--list-indent);
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  list-style: none;
}

.rich-text-editor .ProseMirror ul:not(.task-list) > li {
  position: relative;
  padding-left: 0;
}

/* Custom bullet markers - precisely centered with text */
.rich-text-editor .ProseMirror ul:not(.task-list) > li::before {
  content: '';
  position: absolute;
  left: calc(-1 * var(--list-marker-offset) + 0.25rem);
  top: 0.55em;
  width: 0.375rem;
  height: 0.375rem;
  border-radius: 50%;
  background: hsl(var(--primary));
  opacity: 0.85;
}

/* Nested bullet: hollow circle */
.rich-text-editor .ProseMirror ul:not(.task-list) ul > li::before {
  background: transparent;
  border: 1.5px solid hsl(var(--primary));
  opacity: 0.7;
  width: 0.375rem;
  height: 0.375rem;
}

/* Deeply nested: small square */
.rich-text-editor .ProseMirror ul:not(.task-list) ul ul > li::before {
  border-radius: 1px;
  border: none;
  background: hsl(var(--muted-foreground));
  opacity: 0.6;
  width: 0.3rem;
  height: 0.3rem;
  top: 0.6em;
}

/* ---- ORDERED LISTS (Numbers) ---- */
.rich-text-editor .ProseMirror ol {
  padding-left: var(--list-indent);
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  list-style: none;
  counter-reset: list-counter;
}

.rich-text-editor .ProseMirror ol > li {
  position: relative;
  counter-increment: list-counter;
}

.rich-text-editor .ProseMirror ol > li::before {
  content: counter(list-counter) ".";
  position: absolute;
  left: calc(-1 * var(--list-marker-offset));
  width: calc(var(--list-marker-offset) - 0.375rem);
  text-align: right;
  color: hsl(var(--primary));
  font-weight: 500;
  font-size: 0.875em;
  font-variant-numeric: tabular-nums;
  opacity: 0.9;
}

/* Nested ordered: lowercase letters */
.rich-text-editor .ProseMirror ol ol {
  counter-reset: list-counter;
}

.rich-text-editor .ProseMirror ol ol > li::before {
  content: counter(list-counter, lower-alpha) ".";
  color: hsl(var(--muted-foreground));
}

/* Deeply nested: roman numerals */
.rich-text-editor .ProseMirror ol ol ol {
  counter-reset: list-counter;
}

.rich-text-editor .ProseMirror ol ol ol > li::before {
  content: counter(list-counter, lower-roman) ".";
}

/* ---- COMMON LIST ITEM STYLES ---- */
.rich-text-editor .ProseMirror li {
  margin-top: var(--list-item-gap);
  margin-bottom: var(--list-item-gap);
  line-height: 1.6;
}

.rich-text-editor .ProseMirror li:first-child {
  margin-top: 0;
}

.rich-text-editor .ProseMirror li:last-child {
  margin-bottom: 0;
}

.rich-text-editor .ProseMirror li p {
  margin: 0;
}

/* Nested lists spacing */
.rich-text-editor .ProseMirror li > ul,
.rich-text-editor .ProseMirror li > ol {
  margin-top: var(--list-item-gap);
  margin-bottom: 0;
}

/* ============================================
   TASK LIST - Interactive Checklists
   ============================================ */

.rich-text-editor .ProseMirror ul.task-list {
  padding-left: 0;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  list-style: none;
}

.rich-text-editor .ProseMirror .task-list li.task-item {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  margin-top: var(--list-item-gap);
  margin-bottom: var(--list-item-gap);
  padding: 0.25rem 0.5rem;
  margin-left: -0.5rem;
  margin-right: -0.5rem;
  border-radius: 0.25rem;
  transition: background-color 150ms ease;
}

.rich-text-editor .ProseMirror .task-list li.task-item:first-child {
  margin-top: 0;
}

.rich-text-editor .ProseMirror .task-list li.task-item:last-child {
  margin-bottom: 0;
}

/* Custom checkbox styling */
.rich-text-editor .ProseMirror .task-list li.task-item > label {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  margin-top: 0.1em;
}

.rich-text-editor .ProseMirror .task-list li.task-item > label > input[type="checkbox"] {
  appearance: none;
  -webkit-appearance: none;
  width: 1.125rem;
  height: 1.125rem;
  border: 2px solid hsl(var(--border));
  border-radius: 0.25rem;
  background: transparent;
  cursor: pointer;
  transition: all 120ms ease;
  position: relative;
  flex-shrink: 0;
}

.rich-text-editor .ProseMirror .task-list li.task-item > label > input[type="checkbox"]:hover {
  border-color: hsl(var(--primary));
  background: hsl(var(--primary) / 0.08);
}

.rich-text-editor .ProseMirror .task-list li.task-item > label > input[type="checkbox"]:focus {
  outline: none;
  box-shadow: 0 0 0 2px hsl(var(--primary) / 0.15);
}

/* Checked state */
.rich-text-editor .ProseMirror .task-list li.task-item > label > input[type="checkbox"]:checked {
  background: hsl(var(--primary));
  border-color: hsl(var(--primary));
}

/* Checkmark icon - precisely centered */
.rich-text-editor .ProseMirror .task-list li.task-item > label > input[type="checkbox"]:checked::after {
  content: '';
  position: absolute;
  left: 50%;
  top: 45%;
  width: 0.3rem;
  height: 0.55rem;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: translate(-50%, -50%) rotate(45deg);
}

/* Task item content container */
.rich-text-editor .ProseMirror .task-list li.task-item > div {
  flex: 1;
  min-width: 0;
  line-height: 1.6;
}

/* Strikethrough for completed tasks */
.rich-text-editor .ProseMirror .task-list li.task-item[data-checked="true"] > div {
  text-decoration: line-through;
  text-decoration-color: hsl(var(--muted-foreground) / 0.5);
  opacity: 0.55;
  color: hsl(var(--muted-foreground));
}

.rich-text-editor .ProseMirror .task-list li.task-item[data-checked="true"] > div p {
  text-decoration: line-through;
  text-decoration-color: hsl(var(--muted-foreground) / 0.5);
}

/* Nested task lists - aligned with parent checkbox */
.rich-text-editor .ProseMirror .task-list .task-list {
  padding-left: calc(1.125rem + 0.5rem);
  margin-top: 0.25rem;
  margin-bottom: 0;
}

/* Hover effect - no layout shift */
.rich-text-editor .ProseMirror .task-list li.task-item:hover {
  background: hsl(var(--accent) / 0.4);
}

/* Code */
.rich-text-editor .ProseMirror code {
  @apply bg-muted px-1.5 py-0.5 rounded text-sm font-mono;
}

.rich-text-editor .ProseMirror pre {
  @apply bg-muted p-4 rounded-lg my-4 overflow-x-auto;
}

.rich-text-editor .ProseMirror pre code {
  @apply bg-transparent p-0 text-sm font-mono;
}

/* Tables */
.rich-text-editor .ProseMirror table {
  @apply border-collapse w-full my-4;
}

.rich-text-editor .ProseMirror th {
  @apply border border-border bg-muted px-3 py-2 text-left font-semibold;
}

.rich-text-editor .ProseMirror td {
  @apply border border-border px-3 py-2;
}

.rich-text-editor .ProseMirror .selectedCell {
  @apply bg-accent;
}

/* Blockquote */
.rich-text-editor .ProseMirror blockquote {
  @apply border-l-4 border-border pl-4 my-4 italic text-muted-foreground;
}

/* Horizontal Rule */
.rich-text-editor .ProseMirror hr {
  @apply border-t border-border my-6;
}

/* Slash Command Menu */
.slash-menu-wrapper {
  @apply relative z-50;
}

.slash-menu {
  @apply w-72 bg-popover border border-border rounded-lg shadow-lg overflow-hidden;
  @apply max-h-[400px] overflow-y-auto;
}

.slash-menu-query {
  @apply px-3 py-2 text-xs text-muted-foreground bg-muted border-b border-border;
}

.slash-menu-item {
  @apply flex items-start gap-3 px-3 py-2.5 text-left w-full;
  @apply hover:bg-accent transition-colors;
  @apply border-none bg-transparent cursor-pointer;
}

.slash-menu-item.is-selected {
  @apply bg-accent;
}

.slash-menu-item-icon {
  @apply text-2xl leading-none flex-shrink-0 mt-0.5;
}

.slash-menu-item-content {
  @apply flex-1 min-w-0;
}

.slash-menu-item-title {
  @apply font-medium text-sm text-foreground;
}

.slash-menu-item-description {
  @apply text-xs text-muted-foreground mt-0.5;
}

/* Word Art Styles */
.word-art {
  @apply text-4xl font-bold py-4 text-center;
}

.word-art-gradient-blue {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.word-art-gradient-rainbow {
  background: linear-gradient(to right, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.word-art-gradient-fire {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.word-art-gradient-gold {
  background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ff8c00 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.5));
}

.word-art-shadow-3d {
  @apply text-foreground;
  text-shadow:
    1px 1px 0 hsl(var(--muted-foreground)),
    2px 2px 0 hsl(var(--muted-foreground)),
    3px 3px 0 hsl(var(--muted-foreground)),
    4px 4px 0 hsl(var(--muted-foreground)),
    5px 5px 0 hsl(var(--muted-foreground)),
    6px 6px 0 hsl(var(--muted-foreground)),
    7px 7px 10px rgba(0, 0, 0, 0.3);
}

.word-art-neon-glow {
  @apply text-foreground;
  text-shadow:
    0 0 10px #fff,
    0 0 20px #fff,
    0 0 30px #fff,
    0 0 40px #00ffff,
    0 0 70px #00ffff,
    0 0 80px #00ffff,
    0 0 100px #00ffff,
    0 0 150px #00ffff;
}

.word-art-retro-wave {
  background: linear-gradient(180deg, #ff006e 0%, #ffbe0b 50%, #8338ec 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.word-art-chrome {
  background: linear-gradient(135deg, #c0c0c0 0%, #ffffff 25%, #808080 50%, #ffffff 75%, #c0c0c0 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

/* Minimal variant */
.rich-text-editor.minimal .ProseMirror {
  @apply min-h-[60px];
}

.rich-text-editor.minimal .ProseMirror h1,
.rich-text-editor.minimal .ProseMirror h2,
.rich-text-editor.minimal .ProseMirror h3 {
  @apply text-base font-semibold my-1;
}

.rich-text-editor.minimal .word-art {
  @apply text-2xl py-2;
}

/* Minimal variant task list adjustments */
.rich-text-editor.minimal .ProseMirror .task-list li.task-item > label > input[type="checkbox"] {
  width: 1rem;
  height: 1rem;
}

.rich-text-editor.minimal .ProseMirror .task-list li.task-item > label > input[type="checkbox"]:checked::after {
  width: 0.25rem;
  height: 0.45rem;
}

/* Minimal variant list spacing */
.rich-text-editor.minimal .ProseMirror ul:not(.task-list),
.rich-text-editor.minimal .ProseMirror ol,
.rich-text-editor.minimal .ProseMirror ul.task-list {
  --list-indent: 1.25rem;
  --list-marker-offset: 1.25rem;
  --list-item-gap: 0.25rem;
}

.rich-text-editor.minimal .ProseMirror .task-list .task-list {
  padding-left: calc(1rem + 0.5rem);
}

/* Title variant - for task titles with Word Art */
.rich-text-editor.title {
  @apply border-0 shadow-none bg-transparent;
}

.rich-text-editor.title .ProseMirror {
  @apply min-h-[40px] px-0 py-0;
  font-size: inherit;
  line-height: inherit;
  @apply font-semibold tracking-tight;
}

.rich-text-editor.title .ProseMirror p {
  font-size: inherit;
  line-height: inherit;
  @apply font-semibold tracking-tight my-0;
}

.rich-text-editor.title .word-art {
  font-size: inherit;
  line-height: inherit;
  @apply font-bold py-2;
}
